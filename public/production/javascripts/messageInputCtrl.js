var app=angular.module("App");app.controller("MessageInputCtrl",["$timeout","$scope","$mdSidenav",function(e,s,t){var i=this;this.message="",this.rows=1,e(function(){$("#message-input-box").focus()},0),this.send=function(){if(this.message){var e=emojify.replace(this.message);this.message=e,this.message=this.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),this.main.socket.emit("message sent",this.message,this.main.user,this.main.page),this.message="",this.rows=1}},this.init=function(e){this.main=e},this.increaseRows=function(){this.rows++,this.message+="\n"},s.$watch(function(){return $("#message-input-box").height()},function(e,s){if(e){var t=Math.min(30*i.rows,e);$("#message-input-box").attr("rows",i.rows).height(t)}})}]),app.directive("customKeyPress",function(){return function(e,s,t){s.bind("keydown keypress",function(s){if(13===s.which){var i=s.ctrlKey?"onCtrlEnterPressed":"onEnterPressed";e.$apply(function(){e.$eval(t[i])}),s.preventDefault()}})}}),app.directive("nemooMessageInput",function(){return{restrict:"E",templateUrl:"/views/messageInput.ejs",controller:"MessageInputCtrl",controllerAs:"messageCtrl"}});